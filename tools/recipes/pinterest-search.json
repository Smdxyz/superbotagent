{
    "recipe_name": "pinterest_search",
    "description": "Mencari dan mengirimkan beberapa gambar dari Pinterest sebagai album.",
    "energy_cost": 2,
    "parameters": {
        "query": {
            "type": "string",
            "description": "Topik gambar yang ingin dicari."
        }
    },
    "steps": [
        {
            "step_id": "start_interaction",
            "action": "send_interactive_message",
            "payload": {
                "title": "🔎 Pencarian Pinterest 🔎",
                "text": "Tuan mau Aira carikan berapa gambar untuk \"*{{query}}*\"?",
                "footer": "Pilih salah satu opsi di bawah ini.",
                "interactiveButtons": [
                    {
                        "name": "quick_reply",
                        "params": {
                            "display_text": "Cepat (3 Gambar)",
                            "id": "3"
                        }
                    },
                    {
                        "name": "quick_reply",
                        "params": {
                            "display_text": "Standar (5 Gambar)",
                            "id": "5"
                        }
                    },
                    {
                        "name": "quick_reply",
                        "params": {
                            "display_text": "Banyak (10 Gambar)",
                            "id": "10"
                        }
                    }
                ]
            }
        },
        {
            "step_id": "fetch_pinterest_data",
            "action": "api_call",
            "endpoint": "https://szyrineapi.biz.id/api/downloaders/pinterest/search-v2?q={{query}}&count={{user_choice}}",
            "store_result_as": "pinterest_results"
        },
        {
            "step_id": "send_results_as_album",
            "action": "send_media_from_urls",
            "media_list_from": "{{pinterest_results.result.pins}}",
            "media_mapping": {
                "type": "image",
                "url": "{{media.images.orig.url}}"
            },
            "caption_template": "🖼️ Ini dia, Tuan! Hasil pencarian untuk: *{{query}}*"
        }
    ]
}